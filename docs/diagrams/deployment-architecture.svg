<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="733px" preserveAspectRatio="none" style="width:610px;height:733px;" version="1.1" viewBox="0 0 610 733" width="610px" zoomAndPan="magnify"><defs><filter height="300%" id="ffj85ajf6muy" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="115" x="238.75" y="9.668">Author: Marco Franssen</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="282" x="155.25" y="29.1797">DCTNA Deployment Architecture</text><!--MD5=[97ab183161fd5d1db7fba7485cf76add]
entity Admin--><ellipse cx="125.5" cy="46.9766" fill="#D3D3D3" filter="url(#ffj85ajf6muy)" rx="8" ry="8" style="stroke: #000000; stroke-width: 1.5;"/><path d="M125.5,54.9766 L125.5,81.9766 M112.5,62.9766 L138.5,62.9766 M125.5,81.9766 L112.5,96.9766 M125.5,81.9766 L138.5,96.9766 " fill="none" filter="url(#ffj85ajf6muy)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="137" x="57" y="116.0117">Docker Trust Admin</text><!--MD5=[0f21ac238e421892d29d061233fc52b1]
entity CiJob--><ellipse cx="470.5" cy="219.9766" fill="#D3D3D3" filter="url(#ffj85ajf6muy)" rx="8" ry="8" style="stroke: #000000; stroke-width: 1.5;"/><path d="M470.5,227.9766 L470.5,254.9766 M457.5,235.9766 L483.5,235.9766 M470.5,254.9766 L457.5,269.9766 M470.5,254.9766 L483.5,269.9766 " fill="none" filter="url(#ffj85ajf6muy)" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="450.5" y="289.0117">CI Job</text><!--MD5=[e876e1ec5b38dbf02c3a8dd3902b8618]
entity ServerDB--><path d="M175.5,652.4766 C175.5,642.4766 219.5,642.4766 219.5,642.4766 C219.5,642.4766 263.5,642.4766 263.5,652.4766 L263.5,694.4531 C263.5,704.4531 219.5,704.4531 219.5,704.4531 C219.5,704.4531 175.5,704.4531 175.5,694.4531 L175.5,652.4766 " fill="#90EE90" filter="url(#ffj85ajf6muy)" style="stroke: #008000; stroke-width: 1.5;"/><path d="M175.5,652.4766 C175.5,662.4766 219.5,662.4766 219.5,662.4766 C219.5,662.4766 263.5,662.4766 263.5,652.4766 " fill="none" style="stroke: #008000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="58" x="190.5" y="680.0117">«notary»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="68" x="185.5" y="696.5">server-db</text><!--MD5=[e834ab3daed066426c91d2e7962575e2]
entity SignerDB--><path d="M25,652.4766 C25,642.4766 69.5,642.4766 69.5,642.4766 C69.5,642.4766 114,642.4766 114,652.4766 L114,694.4531 C114,704.4531 69.5,704.4531 69.5,704.4531 C69.5,704.4531 25,704.4531 25,694.4531 L25,652.4766 " fill="#90EE90" filter="url(#ffj85ajf6muy)" style="stroke: #008000; stroke-width: 1.5;"/><path d="M25,652.4766 C25,662.4766 69.5,662.4766 69.5,662.4766 C69.5,662.4766 114,662.4766 114,652.4766 " fill="none" style="stroke: #008000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="58" x="40.5" y="680.0117">«notary»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="35" y="696.5">signer-db</text><!--MD5=[3cdee3fb10447e3063109a1e3adeaed8]
entity dctna-web--><rect fill="#ADD8E6" filter="url(#ffj85ajf6muy)" height="52.9766" style="stroke: #0000FF; stroke-width: 1.5;" width="94" x="78.5" y="224.4766"/><rect fill="#ADD8E6" height="5" style="stroke: #0000FF; stroke-width: 1.5;" width="10" x="73.5" y="229.4766"/><rect fill="#ADD8E6" height="5" style="stroke: #0000FF; stroke-width: 1.5;" width="10" x="73.5" y="267.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="52" x="99.5" y="248.0117">«dctna»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="88.5" y="264.5">dctna-web</text><!--MD5=[85755fb388a4e1207ad8110119be07b8]
entity dctna-server--><rect fill="#ADD8E6" filter="url(#ffj85ajf6muy)" height="52.9766" style="stroke: #0000FF; stroke-width: 1.5;" width="108" x="71.5" y="383.4766"/><rect fill="#ADD8E6" height="5" style="stroke: #0000FF; stroke-width: 1.5;" width="10" x="66.5" y="388.4766"/><rect fill="#ADD8E6" height="5" style="stroke: #0000FF; stroke-width: 1.5;" width="10" x="66.5" y="426.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="52" x="99.5" y="407.0117">«dctna»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="88" x="81.5" y="423.5">dctna-server</text><!--MD5=[ac3b039df1697e8bc347be5b6e583776]
entity notary-signer--><rect fill="#90EE90" filter="url(#ffj85ajf6muy)" height="52.9766" style="stroke: #008000; stroke-width: 1.5;" width="115" x="12" y="528.4766"/><rect fill="#90EE90" height="5" style="stroke: #008000; stroke-width: 1.5;" width="10" x="7" y="533.4766"/><rect fill="#90EE90" height="5" style="stroke: #008000; stroke-width: 1.5;" width="10" x="7" y="571.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="58" x="40.5" y="552.0117">«notary»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="95" x="22" y="568.5">notary-signer</text><!--MD5=[44b8e4f1839a5091b2c2b407dd3e2522]
entity notary-server--><rect fill="#90EE90" filter="url(#ffj85ajf6muy)" height="52.9766" style="stroke: #008000; stroke-width: 1.5;" width="114" x="162.5" y="528.4766"/><rect fill="#90EE90" height="5" style="stroke: #008000; stroke-width: 1.5;" width="10" x="157.5" y="533.4766"/><rect fill="#90EE90" height="5" style="stroke: #008000; stroke-width: 1.5;" width="10" x="157.5" y="571.4531"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="58" x="190.5" y="552.0117">«notary»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="172.5" y="568.5">notary-server</text><!--MD5=[73351eec1af30f4ba42b75789db7d31a]
entity docker-cli--><rect fill="#D3D3D3" filter="url(#ffj85ajf6muy)" height="36.4883" style="stroke: #000000; stroke-width: 1.5;" width="90" x="425.5" y="391.9766"/><rect fill="#D3D3D3" height="5" style="stroke: #000000; stroke-width: 1.5;" width="10" x="420.5" y="396.9766"/><rect fill="#D3D3D3" height="5" style="stroke: #000000; stroke-width: 1.5;" width="10" x="420.5" y="418.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="70" x="435.5" y="415.5117">docker-cli</text><!--MD5=[3c011c0981936cb6ea6d7f5e08cba4bb]
entity docker-registry--><rect fill="#D3D3D3" filter="url(#ffj85ajf6muy)" height="36.4883" style="stroke: #000000; stroke-width: 1.5;" width="127" x="407" y="536.9766"/><rect fill="#D3D3D3" height="5" style="stroke: #000000; stroke-width: 1.5;" width="10" x="402" y="541.9766"/><rect fill="#D3D3D3" height="5" style="stroke: #000000; stroke-width: 1.5;" width="10" x="402" y="563.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="417" y="560.5117">docker-registry</text><!--MD5=[238af37904abd2debf67da0af9788ab4]
entity vault--><rect fill="#D3D3D3" filter="url(#ffj85ajf6muy)" height="36.4883" style="stroke: #000000; stroke-width: 1.5;" width="53" x="337" y="391.9766"/><rect fill="#D3D3D3" height="5" style="stroke: #000000; stroke-width: 1.5;" width="10" x="332" y="396.9766"/><rect fill="#D3D3D3" height="5" style="stroke: #000000; stroke-width: 1.5;" width="10" x="332" y="418.4648"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="33" x="347" y="415.5117">vault</text><!--MD5=[17e7245a5051f99ff7ea3b6826af8454]
link CiJob to docker-cli--><path d="M470.5,291.5966 C470.5,321.7866 470.5,362.2466 470.5,386.9166 " fill="none" id="CiJob-&gt;docker-cli" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="470.5,391.9366,474.5,382.9366,470.5,386.9366,466.5,382.9366,470.5,391.9366" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="477" y="335.0449">sign docker image</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="471.5" y="350.3555">and push to registry</text><!--MD5=[d8109539f0ba5c12f8bddbbf103e76ce]
link docker-cli to docker-registry--><path d="M470.5,428.2266 C470.5,454.0966 470.5,502.9666 470.5,531.5766 " fill="none" id="docker-cli-&gt;docker-registry" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="470.5,536.6666,474.5,527.6666,470.5,531.6666,466.5,527.6666,470.5,536.6666" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="471.5" y="480.0449">push/pull</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="480" y="495.3555">images</text><!--MD5=[70dcf7e5074f2b523156c34f944fb7f2]
link docker-cli to notary-server--><path d="M429.44,428.0366 C398.82,440.9566 359.76,457.8866 344.5,466.4766 C313.52,483.9266 280.66,507.1266 256.41,525.2566 " fill="none" id="docker-cli-&gt;notary-server" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="252.29,528.3566,261.89,526.1566,256.29,525.3566,257.09,519.7566,252.29,528.3566" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="363.5" y="480.0449">sign image /</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="345.5" y="495.3555">fetch tuf metadata</text><!--MD5=[ad0c602faea5d20831f910a5a1a504b4]
link Admin to dctna-web--><path d="M125.5,118.6366 C125.5,149.2866 125.5,191.0966 125.5,219.2366 " fill="none" id="Admin-&gt;dctna-web" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="125.5,224.3266,129.5,215.3266,125.5,219.3266,121.5,215.3266,125.5,224.3266" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="126.5" y="162.0449">administer docker repositories</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="173" y="177.3555">and delegations</text><!--MD5=[eac716ce7f6ba0a1c0fefd71350f554a]
link dctna-web to dctna-server--><path d="M125.5,277.5466 C125.5,305.0366 125.5,348.7266 125.5,378.0966 " fill="none" id="dctna-web-&gt;dctna-server" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="125.5,383.4166,129.5,374.4166,125.5,378.4166,121.5,374.4166,125.5,383.4166" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="126.5" y="342.5449">rest api</text><!--MD5=[ba66d9aa50fea81c92df6fb24e025a61]
link dctna-server to vault--><path d="M179.51,409.9766 C226.5,409.9766 292.99,409.9766 331.84,409.9766 " fill="none" id="dctna-server-&gt;vault" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="336.9,409.9766,327.9,405.9766,331.9,409.9766,327.9,413.9766,336.9,409.9766" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="197.75" y="388.5449">stores passphrases</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="232.75" y="403.8555">for keys</text><!--MD5=[04d5f20d3ebb6bde72f1e7d757492898]
link dctna-server to notary-server--><path d="M142.31,436.5466 C158.38,460.9966 182.63,497.8766 199.64,523.7666 " fill="none" id="dctna-server-&gt;notary-server" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="202.52,528.1466,200.9096,518.4302,199.7696,523.971,194.2288,522.8309,202.52,528.1466" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[0578db5896fcefddbad1653d4718d47e]
reverse link notary-signer to notary-server--><path d="M132.41,554.9766 C142.33,554.9766 152.26,554.9766 162.18,554.9766 " fill="none" id="notary-signer&lt;-notary-server" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="127.21,554.9766,136.21,558.9766,132.21,554.9766,136.21,550.9766,127.21,554.9766" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[258ebf9151d0d8d27764e7d14467f592]
link notary-server to ServerDB--><path d="M219.5,581.5466 C219.5,597.8066 219.5,619.1066 219.5,636.9966 " fill="none" id="notary-server-&gt;ServerDB" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="219.5,642.4366,223.5,633.4366,219.5,637.4366,215.5,633.4366,219.5,642.4366" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[00fdb7c8c1c23c77c6e544d553fd7cbc]
link notary-signer to SignerDB--><path d="M69.5,581.5466 C69.5,597.8066 69.5,619.1066 69.5,636.9966 " fill="none" id="notary-signer-&gt;SignerDB" style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#000000" points="69.5,642.4366,73.5,633.4366,69.5,637.4366,65.5,633.4366,69.5,642.4366" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="115" x="238.75" y="720.1211">Author: Marco Franssen</text><!--MD5=[266df4dc2b8fc3e5c187ea53d8228f41]
@startuml

!$authors = "Marco Franssen"

title DCTNA Deployment Architecture
center header Author: $authors
center footer Author: $authors

skinparam sequence {
	ArrowColor black
	ActorBorderColor DeepSkyBlue
	LifeLineBorderColor black
	LifeLineBackgroundColor grey
}

skinparam component<<dctna>> {
  BackgroundColor lightblue
  BorderColor blue
}

skinparam component<<notary>> {
  BackgroundColor lightgreen
  BorderColor green
}

skinparam actor {
  BackgroundColor lightgrey
  BorderColor black
}

skinparam database {
  BackgroundColor lightgrey
  BorderColor black
}

skinparam database<<notary>> {
  BackgroundColor lightgreen
  BorderColor green
}

skinparam component {
  BackgroundColor lightgrey
  BorderColor black
}

actor "Docker Trust Admin" as Admin
actor "CI Job" as CiJob

database ServerDB <<notary>> [
    server-db
]
database SignerDB <<notary>> [
    signer-db
]

[dctna-web] <<dctna>>
[dctna-server] <<dctna>>
[notary-signer] <<notary>>
[notary-server] <<notary>>

CiJob ..> [docker-cli] : sign docker image\nand push to registry
[docker-cli] ..> [docker-registry] : push/pull\nimages
[docker-cli] ..> [notary-server] : sign image /\nfetch tuf metadata
Admin ..> [dctna-web] : administer docker repositories\nand delegations
[dctna-web] ..> [dctna-server] : rest api
[dctna-server] .right.> [vault] : stores passphrases\nfor keys
[dctna-server] ..> [notary-server]

[notary-server] .left.> [notary-signer]
[notary-server] ..> [ServerDB]
[notary-signer] ..> [SignerDB]

@enduml

@startuml


title DCTNA Deployment Architecture
center header Author: Marco Franssen
center footer Author: Marco Franssen

skinparam sequence {
	ArrowColor black
	ActorBorderColor DeepSkyBlue
	LifeLineBorderColor black
	LifeLineBackgroundColor grey
}

skinparam component<<dctna>> {
  BackgroundColor lightblue
  BorderColor blue
}

skinparam component<<notary>> {
  BackgroundColor lightgreen
  BorderColor green
}

skinparam actor {
  BackgroundColor lightgrey
  BorderColor black
}

skinparam database {
  BackgroundColor lightgrey
  BorderColor black
}

skinparam database<<notary>> {
  BackgroundColor lightgreen
  BorderColor green
}

skinparam component {
  BackgroundColor lightgrey
  BorderColor black
}

actor "Docker Trust Admin" as Admin
actor "CI Job" as CiJob

database ServerDB <<notary>> [
    server-db
]
database SignerDB <<notary>> [
    signer-db
]

[dctna-web] <<dctna>>
[dctna-server] <<dctna>>
[notary-signer] <<notary>>
[notary-server] <<notary>>

CiJob ..> [docker-cli] : sign docker image\nand push to registry
[docker-cli] ..> [docker-registry] : push/pull\nimages
[docker-cli] ..> [notary-server] : sign image /\nfetch tuf metadata
Admin ..> [dctna-web] : administer docker repositories\nand delegations
[dctna-web] ..> [dctna-server] : rest api
[dctna-server] .right.> [vault] : stores passphrases\nfor keys
[dctna-server] ..> [notary-server]

[notary-server] .left.> [notary-signer]
[notary-server] ..> [ServerDB]
[notary-signer] ..> [SignerDB]

@enduml

PlantUML version 1.2020.13(Sat Jun 13 14:26:38 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: NL
--></g></svg>